<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>北京旅游小记</title>
      <link href="/Bihanso.github.io//e0624da7.html"/>
      <url>/Bihanso.github.io//e0624da7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/Bihanso.github.io/assets/css/APlayer.min.css"><script src="/Bihanso.github.io/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Happy"><a href="#Happy" class="headerlink" title="Happy"></a>Happy</h2><p>北京旅游小记</p><div align='center'>  <img src='../images/1.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>二姐拍的太帅了哈哈哈</p></div><div align='center'>  <img src='../images/2.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>和三姐在恭王府</p></div><div align='center'>  <img src='../images/3.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>老妈在恭王府</p></div><div align='center'>  <img src='../images/4.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>二姐在恭王府</p></div><div align='center'>  <img src='../images/5.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>毛蛋第一次吃哭了</p></div><div align='center'>  <img src='../images/6.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>故宫实在太大了，整个被震撼住</p></div><p>观光车看的太开心了</p><div align='center'>  <img src='../images/7.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>大姐与彤彤在北京观光车上</p></div><div align='center'>  <img src='../images/8.jpg' width=450px>  <p align='center' style='font-size:20px;font-family:kaiti;color:red'>三姐老妈霖霖在观光车上 </p></div><p align='center'>     <iframe src="//player.bilibili.com/player.html?aid=395178570&bvid=BV1To4y1a74u&cid=1029590125&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库学习</title>
      <link href="/Bihanso.github.io//911ec8a4.html"/>
      <url>/Bihanso.github.io//911ec8a4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/Bihanso.github.io/assets/css/APlayer.min.css"><script src="/Bihanso.github.io/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h1><p>先检查一下linu是否已经安装mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure><p>如果返回的是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql: unrecognized service</span><br></pre></td></tr></table></figure><p>代表没有安装mysql，需要在线安装mysql。输入下面几行命令即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#安装 MySQL 服务端、核心程序</span><br><span class="line">sudo apt-get install mysql-server</span><br><span class="line"></span><br><span class="line">#安装 MySQL 客户端</span><br><span class="line">sudo apt-get install mysql-client</span><br></pre></td></tr></table></figure><p>在安装过程中会提示确认输入 YES，设置 root 用户密码（之后也可以修改）等，稍等片刻便可安装成功。</p><p>安装结束后，用命令验证是否安装并启动成功：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tap | grep mysql</span><br></pre></td></tr></table></figure><p>如果提示有tcp信息，说明安装成功，可以使用下面的命令按照自己的需求对数据库进行配置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/mysql/my.cnf</span><br></pre></td></tr></table></figure><p>安装成功。</p><h1 id="数据库常用命令"><a href="#数据库常用命令" class="headerlink" title="数据库常用命令"></a>数据库常用命令</h1><h2 id="打开mysql"><a href="#打开mysql" class="headerlink" title="打开mysql"></a>打开mysql</h2><p>使用如下两条命令，打开 MySQL 服务并使用 root 用户登录：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql start</span><br><span class="line">mysql -u root   #会让你输入root密码，如果安装时没让您输入root密码的话，</span><br></pre></td></tr></table></figure><p>登陆成功，会显示welcome to the Mysql。</p><h2 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h2><p>命令 <span style="color:red;font-size:文字大小;font-family:字体;"><strong>show databases；</strong></span>查看有哪些数据库，<strong>注意不要漏掉；</strong></p><h2 id="链接数据库"><a href="#链接数据库" class="headerlink" title="链接数据库"></a>链接数据库</h2><p>命令为<span style="color:red;font-size:文字大小;font-family:字体;"> <strong>use &lt;数据库名字&gt;</strong></span>，这里可以不用加分号，我们可以选择任意一个数据库，比如</p><h2 id="查看数据库-1"><a href="#查看数据库-1" class="headerlink" title="查看数据库"></a>查看数据库</h2><p>命令<span style="color:red;font-size:文字大小;font-family:字体;"> <strong>show tables;</strong></span> <strong>注意不要漏掉；</strong> 退出数据库可用 exit 或者 quit。</p><h1 id="数据库练习操作"><a href="#数据库练习操作" class="headerlink" title="数据库练习操作"></a>数据库练习操作</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>使用命令 <span style="color:red;font-size:文字大小;font-family:字体;"> <strong>create database <databasename>;</strong></span> 注意不漏掉分号，也不要给database加s。创建成功之后，可以使用命令 <span style="color:red;font-size:文字大小;font-family:字体;"> <strong>show databases;</strong></span> 查看已经建立好的数据库，在大多数系统中，sql语句不区分大小写。</p><h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><p>使用命令 <span style="color:red;font-size:文字大小;font-family:字体;"> <strong>drop database <databasename>;</strong></span>。使用<span style="color:red;font-size:文字大小;font-family:字体;"> <strong>drop table <tablename>;</strong></span>删除数据库表</p><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><p>命令 <span style="color:red;font-size:文字大小;font-family:字体;"> <strong>use <databasename>;</strong></span> 显示database changed，则链接成功，可以使用show tables; 看数据库中有哪些表。</p><h2 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h2><p>数据表（<code>table</code>）简称表，它是数据库最重要的组成部分之一。数据库只是一个框架，表才是实质内容。</p><p>而一个数据库中一般会有多张表，这些各自独立的表通过建立关系被联接起来，才成为可以交叉查阅、一目了然的数据库。如下便是一张表：</p><div class="table-container"><table><thead><tr><th>ID</th><th>name</th><th>phone</th></tr></thead><tbody><tr><td>01</td><td>Tom</td><td>110110110</td></tr><tr><td>02</td><td>Jack</td><td>119119119</td></tr><tr><td>03</td><td>Rose</td><td>114114114</td></tr></tbody></table></div><h2 id="新建数据库表"><a href="#新建数据库表" class="headerlink" title="新建数据库表"></a>新建数据库表</h2><p>新建表语句格式为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE name(</span><br><span class="line">列名a 数据类型,</span><br><span class="line">列名b 数据类型，</span><br><span class="line">列名c 数据类型</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>注意不要忘记加分号（需要加分号的需要总结，可以看文章最后面）。</p><p>例子，比如在公司数据库中建立一个employee的表：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE employee(</span><br><span class="line">id int(10),</span><br><span class="line">name char(20),</span><br><span class="line">phone int(12)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>数据库中常用的数据类型可以见下表：</p><div class="table-container"><table><thead><tr><th>数据类型</th><th>大小(字节)</th><th>用途</th><th>格式</th></tr></thead><tbody><tr><td>INT</td><td>4</td><td>整数</td><td></td></tr><tr><td>FLOAT</td><td>4</td><td>单精度浮点数</td><td></td></tr><tr><td>DOUBLE</td><td>8</td><td>双精度浮点数</td><td></td></tr><tr><td>ENUM</td><td>—</td><td>单选,比如性别</td><td>ENUM(‘a’,’b’,’c’)</td></tr><tr><td>SET</td><td>—</td><td>多选</td><td>SET(‘1’,’2’,’3’)</td></tr><tr><td>DATE</td><td>3</td><td>日期</td><td>YYYY-MM-DD</td></tr><tr><td>TIME</td><td>3</td><td>时间点或持续时间</td><td>HH:MM:SS</td></tr><tr><td>YEAR</td><td>1</td><td>年份值</td><td>YYYY</td></tr><tr><td>CHAR</td><td>0~255</td><td>定长字符串</td><td></td></tr><tr><td>VARCHAR</td><td>0~255</td><td>变长字符串</td><td></td></tr><tr><td>TEXT</td><td>0~65535</td><td>长文本数据</td></tr></tbody></table></div><p><strong>CHAR 和 VARCHAR 的区别:</strong> CHAR 的长度是固定的，而 VARCHAR 的长度是可以变化的，比如，存储字符串 “abc”，对于 CHAR(10)，表示存储的字符将占 10 个字节(包括 7 个空字符)，而同样的 VARCHAR(12) 则只占用 4 个字节的长度，<code>增加一个额外字节来存储字符串本身的长度</code>，12 只是最大值，当你存储的字符小于 12 时，按实际长度存储。</p><h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><p>插入语句为:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名(列名a,列名b，列名c) VALUES(值1，值2，值3);</span><br><span class="line">比如向表employee中插入三个人的数据：</span><br><span class="line">INSERT INTO employee(id,name,phone) VALUES(123,&#x27;TOM&#x27;,245);</span><br><span class="line">INSERT INTO employee(id,name,phone) VALUES(133,&#x27;Jacky&#x27;,235);</span><br><span class="line">INSERT INTO employee(id,name) VALUES(143,&#x27;Bob&#x27;);</span><br></pre></td></tr></table></figure><p>注意有些数据类型在插入的时候需要用单引号括起来，比如Tom Jacky Bob,因为他们的数据类型是char，类似的数据类型有VARCHAR,ENUM,TEXT,DATE,TIME等。</p><p>对于第三个语句，其phone的值为null。<strong>并且注意挨着括号的不能有逗号。</strong></p><p>插入完成之后可以使用  <span style="color:red;font-size:文字大小;font-family:字体;"> select * from employee; </span>命令查看一下插入是否成功。</p><h2 id="select-语句"><a href="#select-语句" class="headerlink" title="select 语句"></a>select 语句</h2><p>在数据库操作语句中，使用最频繁，也被认为最重要的是 SELECT 查询语句。之前的实验中，我们已经在不少地方用到了 <code>SELECT * FROM table_name;</code> 这条语句用于查看一张表中的所有内容。 而 SELECT 与各种限制条件关键词搭配使用，具有各种丰富的功能。</p><p>select语句的基本格式为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 要查询的列名 from 表名 where 限制条件;</span><br></pre></td></tr></table></figure><p>若要查询表中的所有内容，将要查询的列名换成 * 用来代表所有列，若只需要查找指定的列的话，可以这样用(<span style="color:blue">两个列之间用逗号隔开)</span>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sname,gender from student;</span><br></pre></td></tr></table></figure><p>SELECT 语句常常会有 WHERE 限制条件，用于达到更加精确的查询。WHERE 限制条件可以有数学符号 (<code>=,&lt;,&gt;,&gt;=,&lt;=</code>) ，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,age from employee where age&gt;25;#在employee表中查找出年龄大于25岁的人的名字以及年龄。</span><br></pre></td></tr></table></figure><p>从这两个单词就能够理解它们的作用。WHERE 后面可以有不止一条限制，而根据条件之间的逻辑关系，可以用 [<code>条件一 OR 条件二</code>] 和 [<code>条件一 AND 条件二</code>] 连接：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select name,age from employee where age&lt;25 or age&gt;30;</span><br><span class="line">select name,age from employee where age&gt;25 and age&lt;30;(where age between 25 and 30)</span><br></pre></td></tr></table></figure><p>关键词 <strong>IN</strong> 和 <strong>NOT IN</strong> 的作用和它们的名字一样明显，用于筛选<strong>“在”</strong>或<strong>“不在”</strong>某个范围内的结果。比如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,age,phone,in_dpt FROM employee WHERE in_dpt IN (&#x27;dpt3&#x27;,&#x27;dpt4&#x27;);#查找出在公寓3和公寓4人的信息。</span><br></pre></td></tr></table></figure><p>关键字 <strong>LIKE</strong> 可用于实现模糊查询，常见于搜索功能中。</p><p>和 LIKE 联用的通常还有通配符，代表未知字符。SQL 中的通配符是 <code>_</code> 和 <code>%</code> 。其中 <code>_</code> 代表一个未指定字符，<code>%</code> 代表<strong>不定个</strong>未指定字符</p><p>比如，要只记得电话号码前四位数为 1101，而后两位忘记了，则可以用两个 <code>_</code> 通配符代替：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,age,phone from employee where phone like &#x27;1101__&#x27;;</span><br></pre></td></tr></table></figure><p>另一种情况，比如只记名字的首字母，又不知道名字长度，则用 <code>%</code> 通配符代替不定个字符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,age,phone from employee where name like &#x27;J%&#x27;;</span><br></pre></td></tr></table></figure><p>这样就查出了名字字母为J的人了。</p><p>为了使查询结果看起来更顺眼，我们可能需要对结果按某一列来排序，这就要用到 <strong>ORDER BY</strong> 排序关键词。默认情况下，<strong>ORDER BY</strong> 的结果是<strong>升序</strong>排列，而使用关键词 <strong>ASC</strong> 和 <strong>DESC</strong> 可指定<strong>升序</strong>或<strong>降序</strong>排序。 比如，我们<strong>按 salary 降序排列</strong>，SQL 语句为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,age,phone,salary from employee order by salary asc(desc); </span><br></pre></td></tr></table></figure><p>SQL 允许对表中的数据进行计算。对此，SQL 有 5 个内置函数，这些函数都对 SELECT 的结果做操作：</p><div class="table-container"><table><thead><tr><th>函数名：</th><th>COUNT</th><th>SUM</th><th>AVG</th><th>MAX</th><th>MIN</th></tr></thead><tbody><tr><td>作用：</td><td>计数</td><td>求和</td><td>求平均值</td><td>最大值</td><td>最小值</td></tr></tbody></table></div><blockquote><p>其中 COUNT 函数可用于任何数据类型(因为它只是计数)，而 SUM 、AVG 函数都只能对数字类数据类型做计算，MAX 和 MIN 可用于数值、字符串或是日期时间数据类型。</p></blockquote><p>具体举例，比如计算出 salary 的最大、最小值，用这样的一条语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select max(salary) as max_salary,min(salary) as min_salary from employee;</span><br></pre></td></tr></table></figure><p><img src="../../images/stuMysql/image-20230306101710744.png" alt="image-20230306101710744"></p><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>上面讨论的 SELECT 语句都仅涉及一个表中的数据，然而有时必须处理多个表才能获得所需的信息。例如：想要知道名为 “Tom” 的员工所在部门做了几个工程。员工信息储存在 employee 表中，但工程信息储存在 project 表中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select of_dpt,count(proj_name) as count_project from project group by of_dpt having of_dpt in (select in_dpt from emplyee where name=&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure><p>上面代码包含两个 SELECT 语句，第二个 SELECT 语句将返回一个集合的数据形式，然后被第一个 SELECT 语句用 <strong>in</strong> 进行判断。</p><p>HAVING 关键字可以的作用和 WHERE 是一样的，都是说明接下来要进行条件筛选操作。区别在于 HAVING 用于对分组后的数据进行筛选。</p><h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>在处理多个表时，子查询只有在结果来自一个表时才有用。但如果需要显示两个表或多个表中的数据，这时就必须使用连接 <strong>(join)</strong> 操作。 连接的基本思想是把两个或多个表当作一个新的表来操作，如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id,name,people_num from employee,department where employee.int_dpt = department.dpt_name oder by id;</span><br></pre></td></tr></table></figure><p>这条语句查询出的是，各员工所在部门的人数，其中员工的 id 和 name 来自 employee 表，people_num 来自 department 表：</p><p>另一个连接语句格式是使用 JOIN ON 语法，刚才的语句等同于：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id,name,people_num FROM employee JOIN department ON employee.in_dpt = department.dpt_name ORDER BY id;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, people_num, COUNT(proj_name) AS count_project</span><br><span class="line">  FROM employee, department, project</span><br><span class="line">  WHERE in_dpt = dpt_name AND of_dpt = dpt_name</span><br><span class="line">  GROUP BY name, people_num;</span><br></pre></td></tr></table></figure><p>前两行不必说了，从三张表选择三列数据；第三行设置三列数据的关系，<code>dpt_name</code> 是唯一值，<code>of_dpt</code> 和 <code>in_dpt</code> 的值必取自 <code>dpt_name</code> 这列，它们应该有外键关系，但不是必须的；第四行分组，分组不可或缺，否则会出现无意义的数据（一般来说连接查询语句中有 <code>COUNT</code> 就会有 <code>GROUP BY</code>），报一个 <code>sql_mode</code> 引起的错误，至于为什么选择 <code>name</code> 和 <code>people_num</code> 分组，大家可以试一下同时去掉 <code>COUNT</code> 和 <code>GROUP BY</code> 语句，看看其中的差异即可理解。</p><p>group by的意思就是给取集合。</p><p>比如，我们拥有下面这个 “Orders” 表：</p><div class="table-container"><table><thead><tr><th style="text-align:left">O_Id</th><th style="text-align:left">OrderDate</th><th style="text-align:left">OrderPrice</th><th style="text-align:left">Customer</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td style="text-align:left">2008/12/29</td><td style="text-align:left">1000</td><td style="text-align:left">Bush</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">2008/11/23</td><td style="text-align:left">1600</td><td style="text-align:left">Carter</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">2008/10/05</td><td style="text-align:left">700</td><td style="text-align:left">Bush</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left">2008/09/28</td><td style="text-align:left">300</td><td style="text-align:left">Bush</td></tr><tr><td style="text-align:left">5</td><td style="text-align:left">2008/08/06</td><td style="text-align:left">2000</td><td style="text-align:left">Adams</td></tr><tr><td style="text-align:left">6</td><td style="text-align:left">2008/07/21</td><td style="text-align:left">100</td><td style="text-align:left">Carter</td></tr></tbody></table></div><p>现在，我们希望查找每个客户的总金额（总订单）。</p><p>我们想要使用 GROUP BY 语句对客户进行组合。</p><p>我们使用下列 SQL 语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT Customer,SUM(OrderPrice) FROM Orders</span><br><span class="line">GROUP BY Customer</span><br></pre></td></tr></table></figure><p>结果集类似这样：</p><div class="table-container"><table><thead><tr><th style="text-align:left">Customer</th><th style="text-align:left">SUM(OrderPrice)</th></tr></thead><tbody><tr><td style="text-align:left">Bush</td><td style="text-align:left">2000</td></tr><tr><td style="text-align:left">Carter</td><td style="text-align:left">1700</td></tr><tr><td style="text-align:left">Adams</td><td style="text-align:left">2000</td></tr></tbody></table></div><p>很棒吧，对不对？</p><p>让我们看一下如果省略 GROUP BY 会出现什么情况：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT Customer,SUM(OrderPrice) FROM Orders</span><br></pre></td></tr></table></figure><p>结果集类似这样：</p><div class="table-container"><table><thead><tr><th style="text-align:left">Customer</th><th style="text-align:left">SUM(OrderPrice)</th></tr></thead><tbody><tr><td style="text-align:left">Bush</td><td style="text-align:left">5700</td></tr><tr><td style="text-align:left">Carter</td><td style="text-align:left">5700</td></tr><tr><td style="text-align:left">Bush</td><td style="text-align:left">5700</td></tr><tr><td style="text-align:left">Bush</td><td style="text-align:left">5700</td></tr><tr><td style="text-align:left">Adams</td><td style="text-align:left">5700</td></tr><tr><td style="text-align:left">Carter</td><td style="text-align:left">5700</td></tr></tbody></table></div><p>上面的结果集不是我们需要的。</p><h1 id="数据库约束"><a href="#数据库约束" class="headerlink" title="数据库约束"></a>数据库约束</h1><p>约束是一种限制，它通过对表的行或列的数据做出限制，来确保表的数据的完整性、唯一性。</p><p>比如规定一个用户的用户名不能为空值且没有重复记录，这就是一种约束规则。</p><p>在mysql中，有以下几种约束：</p><div class="table-container"><table><thead><tr><th>约束类型：</th><th>主键</th><th>默认值</th><th>唯一</th><th>外键</th><th>非空</th></tr></thead><tbody><tr><td>关键字：</td><td>PRIMARY KEY</td><td>DEFAULT</td><td>UNIQUE</td><td>FOREIGN KEY</td><td>NOT NULL</td></tr></tbody></table></div><h2 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h2><p>在数据库中，如果有两行记录数据完全一样，那么如何来区分呢？ 答案是无法区分，如果有两行记录完全相同，那么对于 Mysql 就会认定它们是同一个实体，这与现实生活是存在差别的。</p><p>假如我们要存储一个学生的信息，信息包含姓名，身高，性别，年龄。</p><p>不幸的是有两个女孩都叫小梦，且她们的身高和年龄相同，数据库将无法区分这两个实体，这时就需要用到主键了。</p><p>主键（PRIMARY KEY）作为数据表中一行数据的唯一标识符，在一张表中通过主键就能准确定位到某一行数据，因此主键十分重要，它不能有重复记录且不能为空。定义主键的方式有如下几种：</p><p><img src="C:\Users\86173\AppData\Roaming\Typora\typora-user-images\image-20230305192647953.png" alt="image-20230305192647953"></p><p><img src="C:\Users\86173\AppData\Roaming\Typora\typora-user-images\image-20230305192701500.png" alt="image-20230305192701500"></p><p>还有一种复合主键，意思是可以通过表中的两列或者多列共同标识。</p><p><img src="C:\Users\86173\AppData\Roaming\Typora\typora-user-images\image-20230305192708446.png" alt="image-20230305192708446"></p><h2 id="默认约束-DEFAULT"><a href="#默认约束-DEFAULT" class="headerlink" title="默认约束(DEFAULT)"></a>默认约束(DEFAULT)</h2><p>默认值约束 (DEFAULT) 规定，当有 DEFAULT 约束的列，插入数据为空时，将使用默认值。</p><p>默认值常用于一些可有可无的字段，比如用户的个性签名，如果用户没有设置，系统给他应该设定一个默认的文本，比如空文本或我们常见的 ‘这个人太懒了，没有留下任何信息’。</p><p>DEFAULT约束只会在使用INSERT语句的时候体现出来。就是说当insert into tablename（）values（）时，当tablename（）中的参数有default约束并且insert时没有赋值的时候，这个位置就会被DEFAULT的值代替，上面练习的insert中的第三个语句就是。</p><p>下面这段代码包含了DEFAULT约束：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">employee_info varchar(50) DEFAULT &#x27;这个人很懒，什么也没写&#x27;，</span><br></pre></td></tr></table></figure><h2 id="唯一约束（UNIQUE）"><a href="#唯一约束（UNIQUE）" class="headerlink" title="唯一约束（UNIQUE）"></a>唯一约束（UNIQUE）</h2><p>唯一约束，顾名思义，就是说这个表中的这一列的值不能有重复的值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UNIQUE(phone_num),</span><br></pre></td></tr></table></figure><p>当设置完table的时候，可以insert两个相同的值，验证一下unique是否生效。</p><h2 id="外键（FOREIGN-KEY）"><a href="#外键（FOREIGN-KEY）" class="headerlink" title="外键（FOREIGN KEY）"></a>外键（FOREIGN KEY）</h2><p>外键 (FOREIGN KEY) 既能确保数据完整性，也能表现表之间的关系。</p><p>比如，现在有用户表和文章表，给文章表中添加一个指向用户 id 的外键，表示这篇文章所属的用户 id，外键将确保这个外键指向的记录是存在的，如果你尝试删除一个用户，而这个用户还有文章存在于数据库中，那么操作将无法完成并报错。因为你删除了该用户过后，他发布的文章都没有所属用户了，而这样的情况是不被允许的。同理，你在创建一篇文章的时候也不能为它指定一个不存在的用户 id。</p><p><span style="color:red">一个表可以有多个外键，每个外键必须 REFERENCES (参考) 另一个表的主键，被外键约束的列，取值必须在它参考的列中有对应值。</span></p><p>定义表的时候用下面语句定义外键：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONSTRAINT (自定义外键名字) FOREIGN KEY(int_dpt) REFERENCES department(dpt_name) </span><br></pre></td></tr></table></figure><p>一般写在最下面。</p><h2 id="非空约束（NOT-NULL）"><a href="#非空约束（NOT-NULL）" class="headerlink" title="非空约束（NOT NULL）"></a>非空约束（NOT NULL）</h2><p>非空约束 (NOT NULL),听名字就能理解，被非空约束的列，在插入值时必须非空。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary int(10) NOT NULL,</span><br></pre></td></tr></table></figure><p>若插入违反非空约束的话，就会报错。</p><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>可以尝试在Linux mysql中插入一个学生表。</p><p>现需要构建一个简易的成绩管理系统的数据库，来记录几门课程的学生成绩。数据库中有三张表分别用于记录学生信息、课程信息和成绩信息。</p><p>数据表结构如下：</p><p>学生表(student)：学生 id 、学生姓名和性别</p><p><img src="https://doc.shiyanlou.com/document-uid370051labid48timestamp1490234173345.png" alt="此处输入图片的描述"></p><p>课程表：课程 id 和课程名</p><p><img src="https://doc.shiyanlou.com/document-uid370051labid48timestamp1490234378903.png" alt="此处输入图片的描述"></p><p>成绩表：成绩 id 、学生 id 、课程 id 和分数</p><p><img src="https://doc.shiyanlou.com/document-uid370051labid48timestamp1490234181565.png" alt="此处输入图片的描述"></p><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>1.MySQL 服务处于运行状态</p><p>2.新建数据库的名称为 gradesystem</p><p>3.gradesystem 包含三个表：student、course、mark；</p><ul><li><p>student 表包含 3 列：sid(主键)、sname、gender；</p></li><li><p>course 表包含 2 列：cid(主键)、cname；</p></li><li><p>mark 表包含 4 列：mid(主键)、sid、cid、score ，注意与其他两个表主键之间的关系。</p><p>4.将上述表中的数据分别插入到各个表中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#创建一个数据库</span><br><span class="line">create database gradesystem;</span><br><span class="line">use database gradesystem;</span><br><span class="line">create table student(sid int(5) primary key,sname varchar(10),gender enum(&#x27;male&#x27;,&#x27;female&#x27;));</span><br><span class="line">create table course(cid int(5) primary key,cname varchar(10));</span><br><span class="line">create table mark(mid int(5),sid int(5),cid int(5),score int(5),primary key(mid),foreign key(sid) references student(sid),foreign key(cid) references course(cid));</span><br><span class="line">insert into student(sid,sname,gender) values(1,&#x27;Tom&#x27;,&#x27;male&#x27;) (2,&#x27;Jack&#x27;,&#x27;male&#x27;);</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3></li></ul>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
